---
import type { RootObject } from "../interfaces/dbData";
import {
    FaInstagram,
    FaFacebook,
    FaWhatsapp,
    FaEnvelope,
    FaGlobe,
    FaStar,
    FaPinterest,
    FaTiktok,
    FaRegCopyright,
} from "react-icons/fa";
const { title, description, keywords, featuredImage, favicon } = Astro.props;

let API_URL = import.meta.env.API_URL;
// Realiza la llamada a la API
const response = await fetch(`${API_URL}`);
const data: RootObject = await response.json();
---

<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <title>{title ?? "Linktree"} | {data.name}</title>
        <meta name="description" content={description ?? "We are a company dedicated to providing top-notch services and solutions to meet your needs. Our commitment to excellence and customer satisfaction sets us apart."} />
        <meta name="viewport" content="width=device-width" />
        <link
            rel="icon"
            href={data.logos?.favicon ? data.logos.favicon : "/favicon.svg"}
        />
        <meta name="generator" content={Astro.generator} />
        <meta name="keywords" content={keywords} />
        <meta property="og:title" content={title ?? "Linktree"} />
        <meta property="og:description" content={description ?? "We are a company dedicated to providing top-notch services and solutions to meet your needs. Our commitment to excellence and customer satisfaction sets us apart."} />
        <meta property="og:image" content={featuredImage ?? data.logos.favicon} />
        <meta property="og:type" content="website" />

        <!-- mostrar imagen en la card al enviar -->
        <meta name="twitter:card" content="summary_large_image" />
        <meta name="twitter:title" content={title ?? "Linktree"} />
        <meta name="twitter:description" content={description ?? "We are a company dedicated to providing top-notch services and solutions to meet your needs. Our commitment to excellence and customer satisfaction sets us apart."} />
        <meta name="twitter:image" content={featuredImage ?? data.logos.favicon} />
        <link href="../assets/css/styles.css" rel="stylesheet" />
        <link href="../assets/css/button.css" rel="stylesheet" />
    </head>

    <body>
        <main
            class="min-h-screen bg-gradient-to-br from-black via-zinc-800 to-black flex flex-col items-center justify-start p-4 sm:p-6 md:p-8 relative overflow-x-hidden"
        >
            <div
                class="absolute inset-0 bg-gradient-to-br from-white/10 via-transparent to-white/5"
            >
            </div>
            <div
                class="absolute top-20 left-10 w-72 h-72 bg-white/10 rounded-full blur-3xl"
            >
            </div>
            <div
                class="absolute bottom-20 right-10 w-96 h-96 bg-white/5 rounded-full blur-3xl"
            >
            </div>

            <div
                class="w-full max-w-sm sm:max-w-md md:max-w-lg h-full bg-white/95 backdrop-blur-xl rounded-3xl shadow-2xl border border-white/20 p-4 sm:p-6 md:p-8 mt-4 sm:mt-6 md:mt-10 relative z-10 animate-fade-in"
            >
                <img
                    src={data.logos?.favicon}
                    alt="Logo"
                    class="w-20 h-20 sm:w-28 sm:h-28 md:w-32 md:h-32 object-cover rounded-full shadow-xl border-4 border-white/80 mx-auto mb-6 animate-bounce-in"
                />

                <h1
                    class="text-2xl sm:text-3xl md:text-3xl font-bold text-center mb-2 text-gray-800 animate-slide-up animation-delay-200"
                >
                    {data.name}
                </h1>

                <p
                    class="text-sm sm:text-base md:text-md text-gray-600 text-center mb-8 font-light animate-slide-up animation-delay-300"
                >
                    We are a company dedicated to providing top-notch services and solutions to meet your needs. Our commitment to excellence and customer satisfaction sets us apart.
                </p>

                <div
                    class="w-full space-y-4 animate-slide-up animation-delay-500"
                >
                    <a
                        href="/"
                        target="_blank"
                        class="w-full bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white font-semibold py-2 sm:py-3 md:py-4 px-4 sm:px-6 rounded-xl shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-300 flex items-center justify-center gap-3 group"
                    >
                        <FaGlobe
                            size={18}
                            className="sm:w-6 sm:h-6 group-hover:rotate-12 transition-transform duration-300"
                        />
                        Sitio Web
                    </a>

                    {
                        Array.isArray(data.redesSociales) &&
                            data.redesSociales.map((red: any) => {
                                let Icon = FaGlobe;
                                let redName = red.name.toLowerCase();
                                let buttonclasses =
                                    "w-full text-white font-semibold py-2 sm:py-3 md:py-4 px-4 sm:px-6 rounded-xl shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-300 flex items-center justify-center gap-3 group";

                                if (redName.includes("instagram")) {
                                    Icon = FaInstagram;
                                    buttonclasses +=
                                        " bg-gradient-to-r from-pink-500 via-red-500 to-yellow-500 hover:from-pink-600 hover:via-red-600 hover:to-yellow-600";
                                } else if (redName.includes("facebook")) {
                                    Icon = FaFacebook;
                                    buttonclasses +=
                                        " bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800";
                                } else if (redName.includes("whatsapp")) {
                                    Icon = FaWhatsapp;
                                    buttonclasses +=
                                        " bg-gradient-to-r from-green-500 to-green-600 hover:from-green-600 hover:to-green-700";
                                } else if (redName.includes("pinterest")) {
                                    Icon = FaPinterest;
                                    buttonclasses +=
                                        " bg-gradient-to-r from-red-500 to-red-600 hover:from-red-600 hover:to-red-700";
                                } else if (redName.includes("tiktok")) {
                                    Icon = FaTiktok;
                                    buttonclasses +=
                                        " bg-gradient-to-r from-gray-900 to-black hover:from-gray-800 hover:to-gray-900";
                                } else {
                                    buttonclasses +=
                                        " bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700";
                                }

                                return (
                                    <a
                                        href={red.url}
                                        target="_blank"
                                        class={buttonclasses}
                                    >
                                        <Icon
                                            size={18}
                                            className="sm:w-6 sm:h-6 group-hover:rotate-12 transition-transform duration-300"
                                        />
                                        {redName.charAt(0).toUpperCase() +
                                            redName.slice(1)}
                                    </a>
                                );
                            })
                    }

                    {
                        Array.isArray(data.dataGeneral?.emails) &&
                            data.dataGeneral.emails.length > 0 && (
                                <a
                                    href={`mailto:${data.dataGeneral.emails[0].email}`}
                                    class="w-full bg-gradient-to-r from-gray-600 to-gray-700 hover:from-gray-700 hover:to-gray-800 text-white font-semibold py-2 sm:py-3 md:py-4 px-4 sm:px-6 rounded-xl shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-300 flex items-center justify-center gap-3 group"
                                >
                                    <FaEnvelope
                                        size={18}
                                        className="sm:w-6 sm:h-6 group-hover:scale-110 transition-transform duration-300"
                                    />
                                    Contact via Email
                                </a>
                            )
                    }

                    {
                        Array.isArray(data.dataGeneral?.phones) &&
                            data.dataGeneral.phones.length > 0 && (
                                <a
                                    href={`https://wa.me/${data.dataGeneral.phones[0].number.replace(/[^0-9]/g, "")}`}
                                    target="_blank"
                                    class="w-full bg-gradient-to-r from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 text-white font-semibold py-2 sm:py-3 md:py-4 px-4 sm:px-6 rounded-xl shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-300 flex items-center justify-center gap-3 group"
                                >
                                    <FaWhatsapp
                                        size={18}
                                        className="sm:w-6 sm:h-6 group-hover:scale-110 transition-transform duration-300"
                                    />
                                    Contact via WhatsApp
                                </a>
                            )
                    }

                    {
                        data?.gmb && (
                            <a
                                href={data.gmb}
                                target="_blank"
                                class="w-full bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white font-semibold py-3 sm:py-4 px-6 rounded-xl shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-300 flex items-center justify-center gap-3 group"
                            >
                                <FaStar
                                    size={22}
                                    className="group-hover:rotate-12 transition-transform duration-300"
                                />
                                Leave your comment
                            </a>
                        )
                    }
                </div>
            </div>

            <div
                class="mt-8 sm:mt-12 flex gap-2 items-center text-white/80 text-sm text-center font-light animate-fade-in animation-delay-1000"
            >
                <FaRegCopyright />
                {new Date().getFullYear()}
                {data.name}. All rights reserved.
            </div>
        </main>
    </body>
</html>

<style>
    @keyframes bounce-in {
        0% {
            opacity: 0;
            transform: scale(0.3);
        }
        50% {
            opacity: 1;
            transform: scale(1.05);
        }
        70% {
            transform: scale(0.9);
        }
        100% {
            opacity: 1;
            transform: scale(1);
        }
    }
    .animate-bounce-in {
        animation: bounce-in 1s ease-out;
    }
    .animate-fade-in {
        animation: fadeIn 1s ease-out both;
    }
    .animate-slide-up {
        animation: slideUp 0.8s ease-out both;
    }

    @keyframes fadeIn {
        from {
            opacity: 0;
        }
        to {
            opacity: 1;
        }
    }
    @keyframes slideUp {
        from {
            opacity: 0;
            transform: translateY(30px);
        }
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }
    .animation-delay-200 {
        animation-delay: 0.2s;
    }
    .animation-delay-300 {
        animation-delay: 0.3s;
    }
    .animation-delay-500 {
        animation-delay: 0.5s;
    }
    .animation-delay-1000 {
        animation-delay: 1s;
    }
</style>
